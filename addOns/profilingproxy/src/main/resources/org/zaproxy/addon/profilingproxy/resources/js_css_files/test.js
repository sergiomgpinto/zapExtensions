function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function handle_tubia_player_setup(e){var t,n,i,o,r,s=document.getElementById("VideoEmbed");if(s&&"object"==typeof s){let t="#fed90f",n="#4c9fd5";if(window.site){let e={gamesgames:"#438afe",agame:"#ee6900",mousebreaker:"#f2df00",girlsgogames:"#CA3C8C",oyunskor:"#9a195d",a10:"#D30915"};n=e[window.site.theme],t=e[window.site.theme]}window.TUBIA_OPTIONS={container:"VideoEmbed",publisherId:e,gameId:window.game_id,title:window.game_name,width:"100%",height:"100%",langCode:"en-us",colorMain:t,colorAccent:n,keys:{ch:window.channel,ch_date:window.ch_date_value},debug:!1,onReady:function(e){window.playerInstance=e}}}t=document,n="script",i="tubia-playerjs",r=t.getElementsByTagName(n)[0],(o=t.createElement(n)).id=i,o.src="https://player.tubia.com/libs/gd/gd.js",r.parentNode.insertBefore(o,r)}function display_special_video(e){document.getElementById("walkthrough_header")&&(document.getElementById("walkthrough_header").textContent=special_videos[e].title),document.getElementById("tubiaFrame").contentWindow.postMessage({name:"renderplayer",video:special_videos[e]},"*")}function tubia_player_trigger(e){document.querySelector("#walkthrough-play-button")&&document.querySelector("#walkthrough-play-button").addEventListener("click",()=>{document.querySelector(".walktrough-video-starter").classList.add("d-none"),document.querySelector("#VideoEmbed").classList.remove("d-none"),document.querySelector("#VideoEmbed").classList.add("d-block"),handle_tubia_player_setup(e)})}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function loopAdSlotRequests(e,t){var n=3e4;window.AdSlotsTimeoutIds=new Map,e.forEach(function(e,i){var o=undefined;o=setTimeout(function(){!function i(){t(e),o=setTimeout(i,n),window.AdSlotsTimeoutIds.set(e,o)}()},n+5*i*1e3),window.AdSlotsTimeoutIds.set(e,o)})}function megaSliderSlide(){var e=arguments.length<=0||arguments[0]===undefined?"next":arguments[0],t=document.querySelector("#mega_slider .main-slide"),n=document.querySelector("#mega_slider .games");if(n&&t){switch(resetMegaSlideLoop(),e){case"prev":document.megaSliderCurrentIndex=0===document.megaSliderCurrentIndex?document.lastSlideIndex:--document.megaSliderCurrentIndex,n.prepend(n.lastElementChild);break;case"next":document.megaSliderCurrentIndex=document.megaSliderCurrentIndex===document.lastSlideIndex?0:++document.megaSliderCurrentIndex,n.appendChild(n.firstElementChild)}t.style.left="-"+100*document.megaSliderCurrentIndex+"%"}else resetMegaSlideLoop(!0)}function loopMegaSlide(){megaSlideIntervalId=setInterval(function(){megaSliderSlide()},5e3)}function resetMegaSlideLoop(e){clearInterval(megaSlideIntervalId),e||loopMegaSlide()}function initialize_search(e){const t={container:document.getElementById("searchContainer"),result:document.getElementById("gamesResult"),found:document.getElementById("gamesFoundInSearch"),collections_found:document.getElementById("collectionsFoundInSearch"),viewAll:document.getElementById("viewAllResults"),searchtext:document.getElementById("searchText"),allresults:document.getElementById("allResultsURL"),search:document.getElementById("searchButton")||!1,totalgames:document.getElementById("totalGamesFound")||!1,clear:document.getElementById("clearSearch")||!1,close:document.getElementById("closeSearch")||!1,showSearch:document.getElementById("showSearch")||!1,hideSearch:document.getElementById("hideSearch")||!1,mobileContainer:document.getElementById("wdg_search_bar")||!1,details:document.getElementById("goto_details")||!1,menuisOpen:document.getElementsByClassName("menu-container active")||!1};t.container&&(t.container.style.marginTop=`${document.querySelector("header").offsetHeight}px`);const n=function(e){e.stopPropagation(),document.body.style.overflow="hidden",t.mobileContainer.classList.add("visible"),t.menuisOpen.length&&t.menuisOpen[0].classList.remove("active"),t.searchtext.focus()},i=function(e){e.stopPropagation(),document.body.style.overflow="",t.mobileContainer.classList.remove("visible"),t.container.classList.remove("active"),t.viewAll.classList.remove("show")};e.dropdown||(t.container.onkeydown=function(e){const n=e.keyCode||e.which;if(27==n||13==n)switch(n){case 27:t.container.classList.contains("active")&&l();break;case 13:t.searchtext.value.length>2&&t.totalgames.innerText.length>0&&t.allresults.click()}});const o=function(n){searchtimeout&&clearTimeout(searchtimeout);const i=n.target.value.length;if(e.dropdown||(i?t.clear.classList.add("show"):t.clear.classList.remove("show")),i<=2)return t.found.innerHTML="",e.dropdown?void c():(t.result.innerText="No games found",t.totalgames.innerHTML="",t.container.classList.add("active"),n.target.value.length||t.result.classList.remove("show"),void t.viewAll.classList.remove("show"));searchtimeout=setTimeout(()=>{r(n.target.value)},500)},r=function(n){n=encodeURIComponent(n);const i=new XMLHttpRequest,o=()=>{if(i.status>=200&&i.status<300){const r=JSON.parse(i.response);t.allresults.href=`${window.search_url}?term=${n}`,r.games.length>0||r.collections.length>0?(t.result.classList.remove("show"),t.viewAll.classList.add("show"),t.totalgames.innerText=r.games.length,e.dropdown&&(t.container.classList.contains("active")||t.container.classList.add("active"),t.searchtext.focus())):(t.result.classList.add("show"),t.result.innerText="No games found",t.viewAll.classList.remove("show"),e.dropdown&&(document.addEventListener("click",()=>c()),t.container.classList.contains("active")||t.container.classList.add("active")));const s=document.createElement("div"),a=e.dropdown?document.createElement("div"):"",l=function(t,n){const i=o(t.title);let r="";return r=e.dropdown?'<div class="search-result-game tile-thumbnail"><a class="tile-thumbnail" href="'+t.url+'"><img class="img-responsive" data-index="'+n+'" data-appid="'+t.spil_id+'" src="'+t.image+'" data-path="'+t.title+'" alt="'+t.title+'"/></a>':`<div class="search-result-game"><a href="${t.url}"></a>`+`<img class="img-responsive" src="${t.image}" alt="${t.title}"/>`,r+=void 0===i?`<div class="title">${t.title}</div></div>`:`<div class="title">${i}</div></div>`};var o=function(e){const t={"\u0130":"i","\u015e":"S","\u011e":"G","\xdc":"U","\xd6":"O","\xc7":"C","\u015f":"s","\u011f":"g","\xfc":"u","\xf6":"o","\xe7":"c","\u0131":"i"},i=n.replace(/(([\u0130\u015e\u011e\xdc\xc7\xd6\u015f\u011f\xfc\xe7\xf6\u0131]))/g,e=>t[e]).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(" ")[0],o=new RegExp(i,"gi");let r=[];const s="<b>",a="</b>";for(;r=o.exec(e);)return e.substr(0,r.index)+s+e.substr(r.index,n.length)+a+e.substring(r.index+n.length,e.length)};if(e.dropdown){if(r.collections.length>0){let e=!1;r.collections.reverse().forEach(function(t,n){t&&(e=!0,a.insertAdjacentHTML("afterbegin",l(t,n+1)))}),e&&(document.getElementsByClassName("game-title collection-header")[0].style.display="block")}else document.getElementsByClassName("game-title collection-header")[0].style.display="none";if(r.games.length>0){let e=!1;r.games.slice(0,5).reverse().forEach(function(t,n){t&&(e=!0,s.insertAdjacentHTML("afterbegin",l(t,n+1))),e&&(document.getElementsByClassName("game-title game-header")[0].style.display="block")})}else document.getElementsByClassName("game-title game-header")[0].style.display="none";t.collections_found.innerHTML=a.innerHTML,new TrackerService(!1).thumbnailTrack(t.found.id)}else r.games.reverse().forEach(e=>{s.insertAdjacentHTML("afterbegin",l(e))});t.found.innerHTML=s.innerHTML}else console.error("The request failed!")};i.addEventListener("load",o),i.open("GET",window.autocomplete_url+"?term="+n),i.send()},s=function(){t.searchtext.value="",t.result.innerText="No games found",t.found.innerHTML="",t.searchtext.focus(),t.viewAll.classList.remove("show"),t.result.classList.remove("show"),t.totalgames&&(t.totalgames.innerHTML=""),t.clear&&t.clear.classList.remove("show")},a=function(){t.search.classList.contains("active")?t.search.classList.remove("active"):t.search.classList.add("active"),t.container.classList.contains("active")?t.container.classList.remove("active"):t.container.classList.add("active"),t.searchtext.focus(),s()},l=function(){t.search&&t.search.classList.remove("active"),t.container.classList.remove("active"),s()},c=function(){t.container&&t.container.classList.remove("active"),t.viewAll&&t.viewAll.classList.remove("show")};e.dropdown&&(document.addEventListener("click",()=>c()),t.container&&t.container.addEventListener("click",e=>e.stopPropagation())),e.dropdown&&(t.showSearch&&t.showSearch.addEventListener("click",n),t.hideSearch&&t.hideSearch.addEventListener("click",i),t.details&&t.details.addEventListener("click",()=>t.allresults.click()),t.searchtext&&(t.searchtext.onkeydown=function(e){const n=e.keyCode||e.which;if(27===n||13===n)switch(n){case 27:t.container.classList.contains("active")&&l();break;case 13:t.searchtext.value.length>2&&(e.preventDefault(),window.location.href=t.allresults.href)}})),e.dropdown||(t.search.addEventListener("click",a),t.close.addEventListener("click",l),t.clear.addEventListener("click",s)),t.searchtext&&(t.searchtext.addEventListener("input",o),t.searchtext.addEventListener("propertychange",o))}function avatarSelect(){document.querySelectorAll(".avatar-thumb").forEach(function(e){e.addEventListener("click",function(e){document.querySelectorAll(".avatar-picker-list .selected").forEach(function(e){return e.classList.remove("selected")}),document.getElementById("avatar-picker-preview-img").src=e.currentTarget.src,document.forms.profile_form.user_avatar_id.value=e.currentTarget.dataset.imageIndex,e.currentTarget.classList.add("selected")})})}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function initializeFriendsTabs(){function e(e){var n=location.hash.substr(1);if(n){var i=document.querySelector("[data-tab-content-id="+n+"]");e.scrollLeft=i.offsetLeft,t()}}function t(){var e=location.hash.substr(1),t=document.querySelector("[data-tab-id="+e+"]");document.querySelectorAll(".friends-tabs li.active").forEach(function(e){e.classList.remove("active")}),t.classList.add("active")}function n(){var e=this;[].concat(_toConsumableArray(this.children)).some(function(t){var n=t.offsetLeft==e.scrollLeft;return n&&(location.hash=t.dataset.tabContentId),n})}var i=document.querySelectorAll(".friends-tabs li"),o=document.querySelector(".friends-tabs-contents");i.length&&(i.forEach(function(e){e.onclick=function(){return location.hash=e.dataset.tabId}}),e(o),window.onhashchange=function(){e(o)},o.onscroll=helpers.debounce(n))}function initializePopupTriggers(){document.querySelectorAll(".popup-button[data-popup-name]").forEach(function(e){var t=e.dataset,n=t.popupName,i=t.customConfirm,o=document.querySelector(".popup-wrapper[data-popup-name="+n+"]");if(o){var r=o.querySelector(".close-popup"),s=!1;e.onclick=function(e){var t=this;void 0===i||s||(Rails.stopEverything(e),o.querySelector("[data-confirm-btn]").onclick=function(){s=!0,t.click(),s=!1,o.style.display="none"});s||(o.style.display="block")},r.onclick=function(){o.style.display="none"}}else console.error("There isn't any popup named \""+n+'"')})}window.UTIL={exec(e,t,n){const i=window[document.body.getAttribute("data-namespace-name")],o=t===undefined?"init":t;""!==e&&i[e]&&Array.isArray(i[e][o])&&i[e][o].map(e=>{const t=i.args.find(t=>t[e.name]);Array.isArray(t)?e.apply(this,t[e.name]):e()})},init(){const e=document.body.getAttribute("data-action"),t=document.body.getAttribute("data-controller");window.UTIL.exec("common"),window.UTIL.exec(t),window.UTIL.exec(t,e),window.UTIL.exec(t,"finalize"),window.UTIL.exec("common","finalize")}},window.PORTALJS={run:(e="common",t="init",n,i=[])=>{if(window.PORTALJS[e]=window.PORTALJS[e]||{},window.PORTALJS[e][t]=window.PORTALJS[e][t]||[],window.PORTALJS[e][t].push(n),i.length){const e=[];e[n.name]=i,window.PORTALJS.args.push(e)}},args:[]},
/*
Turbolinks 5.2.0
Copyright Â© 2018 Basecamp, LLC
 */
function(){var e=this;(function(){(function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(e,n){return t.controller.visit(e,n)},clearCache:function(){return t.controller.clearCache()},setProgressBarDelay:function(e){return t.controller.setProgressBarDelay(e)}}}).call(this)}).call(e);var t=e.Turbolinks;(function(){(function(){var e,n,i,o=[].slice;t.copyObject=function(e){var t,n,i;for(t in n={},e)i=e[t],n[t]=i;return n},t.closest=function(t,n){return e.call(t,n)},e=function(){var e;return null!=(e=document.documentElement.closest)?e:function(e){var t;for(t=this;t;){if(t.nodeType===Node.ELEMENT_NODE&&n.call(t,e))return t;t=t.parentNode}}}(),t.defer=function(e){return setTimeout(e,1)},t.throttle=function(e){var t;return t=null,function(){var n,i;return n=1<=arguments.length?o.call(arguments,0):[],null!=t?t:t=requestAnimationFrame((i=this,function(){return t=null,e.apply(i,n)}))}},t.dispatch=function(e,t){var n,o,r,s,a,l;return l=(a=null!=t?t:{}).target,n=a.cancelable,o=a.data,(r=document.createEvent("Events")).initEvent(e,!0,!0===n),r.data=null!=o?o:{},r.cancelable&&!i&&(s=r.preventDefault,r.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),s.call(this)}),(null!=l?l:document).dispatchEvent(r),r},i=function(){var e;return(e=document.createEvent("Events")).initEvent("test",!0,!0),e.preventDefault(),e.defaultPrevented}(),t.match=function(e,t){return n.call(e,t)},n=function(){var e,t,n,i;return null!=(t=null!=(n=null!=(i=(e=document.documentElement).matchesSelector)?i:e.webkitMatchesSelector)?n:e.msMatchesSelector)?t:e.mozMatchesSelector}(),t.uuid=function(){var e,t,n;for(n="",e=t=1;36>=t;e=++t)n+=9===e||14===e||19===e||24===e?"-":15===e?"4":20===e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){t.Location=function(){function e(e){var t,n;null==e&&(e=""),(n=document.createElement("a")).href=e.toString(),this.absoluteURL=n.href,2>(t=n.hash.length)?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-t),this.anchor=n.hash.slice(1))}var t,n,i,o;return e.wrap=function(e){return e instanceof this?e:new this(e)},e.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},e.prototype.getPath=function(){var e,t;return null!=(e=null!=(t=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?t[1]:void 0)?e:"/"},e.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},e.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},e.prototype.getExtension=function(){var e,t;return null!=(e=null!=(t=this.getLastPathComponent().match(/\.[^.]*$/))?t[0]:void 0)?e:""},e.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},e.prototype.isPrefixedBy=function(e){var t;return t=n(e),this.isEqualTo(e)||o(this.absoluteURL,t)},e.prototype.isEqualTo=function(e){return this.absoluteURL===(null!=e?e.absoluteURL:void 0)},e.prototype.toCacheKey=function(){return this.requestURL},e.prototype.toJSON=function(){return this.absoluteURL},e.prototype.toString=function(){return this.absoluteURL},e.prototype.valueOf=function(){return this.absoluteURL},n=function(e){return t(e.getOrigin()+e.getPath())},t=function(e){return i(e,"/")?e:e+"/"},o=function(e,t){return e.slice(0,t.length)===t},i=function(e,t){return e.slice(-t.length)===t},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.HttpRequest=function(){function n(n,i,o){this.delegate=n,this.requestCanceled=e(this.requestCanceled,this),this.requestTimedOut=e(this.requestTimedOut,this),this.requestFailed=e(this.requestFailed,this),this.requestLoaded=e(this.requestLoaded,this),this.requestProgressed=e(this.requestProgressed,this),this.url=t.Location.wrap(i).requestURL,this.referrer=t.Location.wrap(o).absoluteURL,this.createXHR()}return n.NETWORK_FAILURE=0,n.TIMEOUT_FAILURE=-1,n.timeout=60,n.prototype.send=function(){var e;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(e=this.delegate).requestStarted?e.requestStarted():void 0):void 0},n.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},n.prototype.requestProgressed=function(e){return e.lengthComputable?this.setProgress(e.loaded/e.total):void 0},n.prototype.requestLoaded=function(){return this.endRequest((e=this,function(){var t;return 200<=(t=e.xhr.status)&&300>t?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}));var e},n.prototype.requestFailed=function(){return this.endRequest((e=this,function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.NETWORK_FAILURE)}));var e},n.prototype.requestTimedOut=function(){return this.endRequest((e=this,function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.TIMEOUT_FAILURE)}));var e},n.prototype.requestCanceled=function(){return this.endRequest()},n.prototype.notifyApplicationBeforeRequestStart=function(){return t.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},n.prototype.notifyApplicationAfterRequestEnd=function(){return t.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},n.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},n.prototype.endRequest=function(e){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=e&&e.call(this),this.destroy()):void 0},n.prototype.setProgress=function(e){var t;return this.progress=e,"function"==typeof(t=this.delegate).requestProgressed?t.requestProgressed(this.progress):void 0},n.prototype.destroy=function(){var e;return this.setProgress(1),"function"==typeof(e=this.delegate).requestFinished&&e.requestFinished(),this.delegate=null,this.xhr=null},n}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.ProgressBar=function(){function t(){this.trickle=e(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var n;return n=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+n+"ms ease-out, opacity "+n/2+"ms "+n/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement((e=this,function(){return e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}))):void 0;var e},t.prototype.setValue=function(e){return this.value=e,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(e){return this.progressElement.style.opacity=0,setTimeout(e,1.5*n)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,n)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame((e=this,function(){return e.progressElement.style.width=10+90*e.value+"%"}));var e},t.prototype.createStylesheetElement=function(){var e;return(e=document.createElement("style")).type="text/css",e.textContent=this.constructor.defaultCSS,e},t.prototype.createProgressElement=function(){var e;return(e=document.createElement("div")).className="turbolinks-progress-bar",e},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.BrowserAdapter=function(){function n(n){this.controller=n,this.showProgressBar=e(this.showProgressBar,this),this.progressBar=new t.ProgressBar}var i,o,r;return r=t.HttpRequest,i=r.NETWORK_FAILURE,o=r.TIMEOUT_FAILURE,n.prototype.visitProposedToLocationWithAction=function(e,t){return this.controller.startVisitToLocationWithAction(e,t)},n.prototype.visitStarted=function(e){return e.issueRequest(),e.changeHistory(),e.loadCachedSnapshot()},n.prototype.visitRequestStarted=function(e){return this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!==e.action?this.showProgressBarAfterDelay():this.showProgressBar()},n.prototype.visitRequestProgressed=function(e){return this.progressBar.setValue(e.progress)},n.prototype.visitRequestCompleted=function(e){return e.loadResponse()},n.prototype.visitRequestFailedWithStatusCode=function(e,t){switch(t){case i:case o:return this.reload();default:return e.loadResponse()}},n.prototype.visitRequestFinished=function(){return this.hideProgressBar()},n.prototype.visitCompleted=function(e){return e.followRedirect()},n.prototype.pageInvalidated=function(){return this.reload()},n.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},n.prototype.showProgressBar=function(){return this.progressBar.show()},n.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},n.prototype.reload=function(){return window.location.reload()},n}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.History=function(){function n(t){this.delegate=t,this.onPageLoad=e(this.onPageLoad,this),this.onPopState=e(this.onPopState,this)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},n.prototype.push=function(e,n){return e=t.Location.wrap(e),this.update("push",e,n)},n.prototype.replace=function(e,n){return e=t.Location.wrap(e),this.update("replace",e,n)},n.prototype.onPopState=function(e){var n,i,o,r;return this.shouldHandlePopState()&&(r=null!=(i=e.state)?i.turbolinks:void 0)?(n=t.Location.wrap(window.location),o=r.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(n,o)):void 0},n.prototype.onPageLoad=function(){return t.defer(function(e){return function(){return e.pageLoaded=!0}}(this))},n.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},n.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},n.prototype.update=function(e,t,n){var i;return i={turbolinks:{restorationIdentifier:n}},history[e+"State"](i,null,t)},n}()}.call(this),function(){t.HeadDetails=function(){function e(e){var t,n,i,s,a;for(this.elements={},n=0,s=e.length;s>n;n++)(a=e[n]).nodeType===Node.ELEMENT_NODE&&(i=a.outerHTML,(null!=(t=this.elements)[i]?t[i]:t[i]={type:r(a),tracked:o(a),elements:[]}).elements.push(a))}var t,n,i,o,r;return e.fromHeadElement=function(e){var t;return new this(null!=(t=null!=e?e.childNodes:void 0)?t:[])},e.prototype.hasElementWithKey=function(e){return e in this.elements},e.prototype.getTrackedElementSignature=function(){var e;return function(){var t,n;for(e in n=[],t=this.elements)t[e].tracked&&n.push(e);return n}.call(this).join("")},e.prototype.getScriptElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("script",e)},e.prototype.getStylesheetElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("stylesheet",e)},e.prototype.getElementsMatchingTypeNotInDetails=function(e,t){var n,i,o,r,s,a;for(i in s=[],o=this.elements)a=(r=o[i]).type,n=r.elements,a!==e||t.hasElementWithKey(i)||s.push(n[0]);return s},e.prototype.getProvisionalElements=function(){var e,t,n,i,o,r,s;for(t in n=[],i=this.elements)s=(o=i[t]).type,r=o.tracked,e=o.elements,null!=s||r?e.length>1&&n.push.apply(n,e.slice(1)):n.push.apply(n,e);return n},e.prototype.getMetaValue=function(e){var t;return null!=(t=this.findMetaElementByName(e))?t.getAttribute("content"):void 0},e.prototype.findMetaElementByName=function(e){var n,i,o,r;for(o in n=void 0,r=this.elements)i=r[o].elements,t(i[0],e)&&(n=i[0]);return n},r=function(e){return n(e)?"script":i(e)?"stylesheet":void 0},o=function(e){return"reload"===e.getAttribute("data-turbolinks-track")},n=function(e){return"script"===e.tagName.toLowerCase()},i=function(e){var t;return"style"===(t=e.tagName.toLowerCase())||"link"===t&&"stylesheet"===e.getAttribute("rel")},t=function(e,t){return"meta"===e.tagName.toLowerCase()&&e.getAttribute("name")===t},e}()}.call(this),function(){t.Snapshot=function(){function e(e,t){this.headDetails=e,this.bodyElement=t}return e.wrap=function(e){return e instanceof this?e:"string"==typeof e?this.fromHTMLString(e):this.fromHTMLElement(e)},e.fromHTMLString=function(e){var t;return(t=document.createElement("html")).innerHTML=e,this.fromHTMLElement(t)},e.fromHTMLElement=function(e){var n,i,o;return i=e.querySelector("head"),n=null!=(o=e.querySelector("body"))?o:document.createElement("body"),new this(t.HeadDetails.fromHeadElement(i),n)},e.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},e.prototype.getRootLocation=function(){var e,n;return n=null!=(e=this.getSetting("root"))?e:"/",new t.Location(n)},e.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},e.prototype.getElementForAnchor=function(e){try{return this.bodyElement.querySelector("[id='"+e+"'], a[name='"+e+"']")}catch(t){}},e.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll("[id][data-turbolinks-permanent]")},e.prototype.getPermanentElementById=function(e){return this.bodyElement.querySelector("#"+e+"[data-turbolinks-permanent]")},e.prototype.getPermanentElementsPresentInSnapshot=function(e){var t,n,i,o,r;for(r=[],n=0,i=(o=this.getPermanentElements()).length;i>n;n++)t=o[n],e.getPermanentElementById(t.id)&&r.push(t);return r},e.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector("[autofocus]")},e.prototype.hasAnchor=function(e){return null!=this.getElementForAnchor(e)},e.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},e.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},e.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},e.prototype.getSetting=function(e){return this.headDetails.getMetaValue("turbolinks-"+e)},e}()}.call(this),function(){var e=[].slice;t.Renderer=function(){function t(){}var n;return t.render=function(){var t,n,i;return n=arguments[0],t=arguments[1],(i=function(e,t,n){n.prototype=e.prototype;var i=new n,o=e.apply(i,t);return Object(o)===o?o:i}(this,3<=arguments.length?e.call(arguments,2):[],function(){})).delegate=n,i.render(t),i},t.prototype.renderView=function(e){return this.delegate.viewWillRender(this.newBody),e(),this.delegate.viewRendered(this.newBody)},t.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},t.prototype.createScriptElement=function(e){var t;return"false"===e.getAttribute("data-turbolinks-eval")?e:((t=document.createElement("script")).textContent=e.textContent,t.async=!1,n(t,e),t)},n=function(e,t){var n,i,o,r,s,a,l;for(a=[],n=0,i=(r=t.attributes).length;i>n;n++)o=(s=r[n]).name,l=s.value,a.push(e.setAttribute(o,l));return a},t}()}.call(this),function(){var e,n,i=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;t.SnapshotRenderer=function(t){function o(e,t,n){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return i(o,t),o.prototype.render=function(e){return this.shouldRender()?(this.mergeHead(),this.renderView((t=this,function(){return t.replaceBody(),t.isPreview||t.focusFirstAutofocusableElement(),e()}))):this.invalidateView();var t},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var e;return e=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(e)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.getNewHeadStylesheetElements()).length;n>t;t++)e=i[t],o.push(document.head.appendChild(e));return o},o.prototype.copyNewHeadScriptElements=function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.getNewHeadScriptElements()).length;n>t;t++)e=i[t],o.push(document.head.appendChild(this.createScriptElement(e)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.getCurrentHeadProvisionalElements()).length;n>t;t++)e=i[t],o.push(document.head.removeChild(e));return o},o.prototype.copyNewHeadProvisionalElements=function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.getNewHeadProvisionalElements()).length;n>t;t++)e=i[t],o.push(document.head.appendChild(e));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var t,i,o,r,s,a,l;for(l=[],t=0,i=(a=this.getCurrentBodyPermanentElements()).length;i>t;t++)r=a[t],s=e(r),o=this.newSnapshot.getPermanentElementById(r.id),n(r,s.element),n(o,r),l.push(s);return l},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(e){var t,i,o,r,s,a;for(a=[],o=0,r=e.length;r>o;o++)i=(s=e[o]).element,t=s.permanentElement.cloneNode(!0),a.push(n(i,t));return a},o.prototype.activateNewBodyScriptElements=function(){var e,t,i,o,r,s;for(s=[],t=0,o=(r=this.getNewBodyScriptElements()).length;o>t;t++)i=r[t],e=this.createScriptElement(i),s.push(n(i,e));return s},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var e;return null!=(e=this.newSnapshot.findFirstAutofocusableElement())?e.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},o}(t.Renderer),e=function(e){var t;return(t=document.createElement("meta")).setAttribute("name","turbolinks-permanent-placeholder"),t.setAttribute("content",e.id),{element:t,permanentElement:e}},n=function(e,t){var n;return(n=e.parentNode)?n.replaceChild(t,e):void 0}}.call(this),function(){var e=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;t.ErrorRenderer=function(t){function n(e){var t;(t=document.createElement("html")).innerHTML=e,this.newHead=t.querySelector("head"),this.newBody=t.querySelector("body")}return e(n,t),n.prototype.render=function(e){return this.renderView((t=this,function(){return t.replaceHeadAndBody(),t.activateBodyScriptElements(),e()}));var t},n.prototype.replaceHeadAndBody=function(){var e,t;return t=document.head,e=document.body,t.parentNode.replaceChild(this.newHead,t),e.parentNode.replaceChild(this.newBody,e)},n.prototype.activateBodyScriptElements=function(){var e,t,n,i,o,r;for(r=[],t=0,n=(i=this.getScriptElements()).length;n>t;t++)o=i[t],e=this.createScriptElement(o),r.push(o.parentNode.replaceChild(e,o));return r},n.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},n}(t.Renderer)}.call(this),function(){t.View=function(){function e(e){this.delegate=e,this.htmlElement=document.documentElement}return e.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},e.prototype.getElementForAnchor=function(e){return this.getSnapshot().getElementForAnchor(e)},e.prototype.getSnapshot=function(){return t.Snapshot.fromHTMLElement(this.htmlElement)},e.prototype.render=function(e,t){var n,i,o;return o=e.snapshot,n=e.error,i=e.isPreview,this.markAsPreview(i),null!=o?this.renderSnapshot(o,i,t):this.renderError(n,t)},e.prototype.markAsPreview=function(e){return e?this.htmlElement.setAttribute("data-turbolinks-preview",""):this.htmlElement.removeAttribute("data-turbolinks-preview")},e.prototype.renderSnapshot=function(e,n,i){return t.SnapshotRenderer.render(this.delegate,i,this.getSnapshot(),t.Snapshot.wrap(e),n)},e.prototype.renderError=function(e,n){return t.ErrorRenderer.render(this.delegate,n,e)},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.ScrollManager=function(){function n(n){this.delegate=n,this.onScroll=e(this.onScroll,this),this.onScroll=t.throttle(this.onScroll)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},n.prototype.scrollToElement=function(e){return e.scrollIntoView()},n.prototype.scrollToPosition=function(e){var t,n;return t=e.x,n=e.y,window.scrollTo(t,n)},n.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},n.prototype.updatePosition=function(e){var t;return this.position=e,null!=(t=this.delegate)?t.scrollPositionChanged(this.position):void 0},n}()}.call(this),function(){t.SnapshotCache=function(){function e(e){this.size=e,this.keys=[],this.snapshots={}}var n;return e.prototype.has=function(e){return n(e)in this.snapshots},e.prototype.get=function(e){var t;if(this.has(e))return t=this.read(e),this.touch(e),t},e.prototype.put=function(e,t){return this.write(e,t),this.touch(e),t},e.prototype.read=function(e){var t;return t=n(e),this.snapshots[t]},e.prototype.write=function(e,t){var i;return i=n(e),this.snapshots[i]=t},e.prototype.touch=function(e){var t,i;return i=n(e),(t=this.keys.indexOf(i))>-1&&this.keys.splice(t,1),this.keys.unshift(i),this.trim()},e.prototype.trim=function(){var e,t,n,i,o;for(o=[],e=0,n=(i=this.keys.splice(this.size)).length;n>e;e++)t=i[e],o.push(delete this.snapshots[t]);return o},n=function(e){return t.Location.wrap(e).toCacheKey()},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.Visit=function(){function n(n,i,o){this.controller=n,this.action=o,this.performScroll=e(this.performScroll,this),this.identifier=t.uuid(),this.location=t.Location.wrap(i),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var i;return n.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},n.prototype.cancel=function(){var e;return"started"===this.state?(null!=(e=this.request)&&e.cancel(),this.cancelRender(),this.state="canceled"):void 0},n.prototype.complete=function(){var e;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(e=this.adapter).visitCompleted&&e.visitCompleted(this),this.controller.visitCompleted(this)):void 0},n.prototype.fail=function(){var e;return"started"===this.state?(this.state="failed","function"==typeof(e=this.adapter).visitFailed?e.visitFailed(this):void 0):void 0},n.prototype.changeHistory=function(){var e,t;return this.historyChanged?void 0:(e=this.location.isEqualTo(this.referrer)?"replace":this.action,t=i(e),this.controller[t](this.location,this.restorationIdentifier),this.historyChanged=!0)},n.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new t.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},n.prototype.getCachedSnapshot=function(){var e;return!(e=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!e.hasAnchor(this.location.anchor)||"restore"!==this.action&&!e.isPreviewable()?void 0:e},n.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},n.prototype.loadCachedSnapshot=function(){var e,t;return(t=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var n;return this.cacheSnapshot(),this.controller.render({snapshot:t,isPreview:e},this.performScroll),"function"==typeof(n=this.adapter).visitRendered&&n.visitRendered(this),e?void 0:this.complete()})):void 0},n.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var e,t;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.complete())}):void 0},n.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},n.prototype.requestStarted=function(){var e;return this.recordTimingMetric("requestStart"),"function"==typeof(e=this.adapter).visitRequestStarted?e.visitRequestStarted(this):void 0},n.prototype.requestProgressed=function(e){var t;return this.progress=e,"function"==typeof(t=this.adapter).visitRequestProgressed?t.visitRequestProgressed(this):void 0},n.prototype.requestCompletedWithResponse=function(e,n){return this.response=e,null!=n&&(this.redirectedToLocation=t.Location.wrap(n)),this.adapter.visitRequestCompleted(this)},n.prototype.requestFailedWithStatusCode=function(e,t){return this.response=t,this.adapter.visitRequestFailedWithStatusCode(this,e)},n.prototype.requestFinished=function(){var e;return this.recordTimingMetric("requestEnd"),"function"==typeof(e=this.adapter).visitRequestFinished?e.visitRequestFinished(this):void 0},n.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},n.prototype.scrollToRestoredPosition=function(){var e,t;return null!=(e=null!=(t=this.restorationData)?t.scrollPosition:void 0)?(this.controller.scrollToPosition(e),!0):void 0},n.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},n.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},n.prototype.recordTimingMetric=function(e){var t;return null!=(t=this.timingMetrics)[e]?t[e]:t[e]=(new Date).getTime()},n.prototype.getTimingMetrics=function(){return t.copyObject(this.timingMetrics)},i=function(e){switch(e){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},n.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},n.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},n.prototype.render=function(e){return this.cancelRender(),this.frame=requestAnimationFrame((t=this,function(){return t.frame=null,e.call(t)}));var t},n.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},n}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.Controller=function(){function n(){this.clickBubbled=e(this.clickBubbled,this),this.clickCaptured=e(this.clickCaptured,this),this.pageLoaded=e(this.pageLoaded,this),this.history=new t.History(this),this.view=new t.View(this),this.scrollManager=new t.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return n.prototype.start=function(){return t.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},n.prototype.disable=function(){return this.enabled=!1},n.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},n.prototype.clearCache=function(){return this.cache=new t.SnapshotCache(10)},n.prototype.visit=function(e,n){var i,o;return null==n&&(n={}),e=t.Location.wrap(e),this.applicationAllowsVisitingLocation(e)?this.locationIsVisitable(e)?(i=null!=(o=n.action)?o:"advance",this.adapter.visitProposedToLocationWithAction(e,i)):window.location=e:void 0},n.prototype.startVisitToLocationWithAction=function(e,n,i){var o;return t.supported?(o=this.getRestorationDataForIdentifier(i),this.startVisit(e,n,{restorationData:o})):window.location=e},n.prototype.setProgressBarDelay=function(e){return this.progressBarDelay=e},n.prototype.startHistory=function(){return this.location=t.Location.wrap(window.location),this.restorationIdentifier=t.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.stopHistory=function(){return this.history.stop()},n.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(e,n){return this.restorationIdentifier=n,this.location=t.Location.wrap(e),this.history.push(this.location,this.restorationIdentifier)},n.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(e,n){return this.restorationIdentifier=n,this.location=t.Location.wrap(e),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.historyPoppedToLocationWithRestorationIdentifier=function(e,n){var i;return this.restorationIdentifier=n,this.enabled?(i=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(e,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:i,historyChanged:!0}),this.location=t.Location.wrap(e)):this.adapter.pageInvalidated()},n.prototype.getCachedSnapshotForLocation=function(e){var t;return null!=(t=this.cache.get(e))?t.clone():void 0},n.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},n.prototype.cacheSnapshot=function(){var e,n;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),n=this.view.getSnapshot(),e=this.lastRenderedLocation,t.defer(function(t){
return function(){return t.cache.put(e,n.clone())}}(this))):void 0},n.prototype.scrollToAnchor=function(e){var t;return(t=this.view.getElementForAnchor(e))?this.scrollToElement(t):this.scrollToPosition({x:0,y:0})},n.prototype.scrollToElement=function(e){return this.scrollManager.scrollToElement(e)},n.prototype.scrollToPosition=function(e){return this.scrollManager.scrollToPosition(e)},n.prototype.scrollPositionChanged=function(e){return this.getCurrentRestorationData().scrollPosition=e},n.prototype.render=function(e,t){return this.view.render(e,t)},n.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},n.prototype.viewWillRender=function(e){return this.notifyApplicationBeforeRender(e)},n.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},n.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},n.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},n.prototype.clickBubbled=function(e){var t,n,i;return this.enabled&&this.clickEventIsSignificant(e)&&(n=this.getVisitableLinkForNode(e.target))&&(i=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,i)?(e.preventDefault(),t=this.getActionForLink(n),this.visit(i,{action:t})):void 0},n.prototype.applicationAllowsFollowingLinkToLocation=function(e,t){return!this.notifyApplicationAfterClickingLinkToLocation(e,t).defaultPrevented},n.prototype.applicationAllowsVisitingLocation=function(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented},n.prototype.notifyApplicationAfterClickingLinkToLocation=function(e,n){return t.dispatch("turbolinks:click",{target:e,data:{url:n.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationBeforeVisitingLocation=function(e){return t.dispatch("turbolinks:before-visit",{data:{url:e.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationAfterVisitingLocation=function(e){return t.dispatch("turbolinks:visit",{data:{url:e.absoluteURL}})},n.prototype.notifyApplicationBeforeCachingSnapshot=function(){return t.dispatch("turbolinks:before-cache")},n.prototype.notifyApplicationBeforeRender=function(e){return t.dispatch("turbolinks:before-render",{data:{newBody:e}})},n.prototype.notifyApplicationAfterRender=function(){return t.dispatch("turbolinks:render")},n.prototype.notifyApplicationAfterPageLoad=function(e){return null==e&&(e={}),t.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:e}})},n.prototype.startVisit=function(e,t,n){var i;return null!=(i=this.currentVisit)&&i.cancel(),this.currentVisit=this.createVisit(e,t,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(e)},n.prototype.createVisit=function(e,n,i){var o,r,s,a,l;return a=(r=null!=i?i:{}).restorationIdentifier,s=r.restorationData,o=r.historyChanged,(l=new t.Visit(this,e,n)).restorationIdentifier=null!=a?a:t.uuid(),l.restorationData=t.copyObject(s),l.historyChanged=o,l.referrer=this.location,l},n.prototype.visitCompleted=function(e){return this.notifyApplicationAfterPageLoad(e.getTimingMetrics())},n.prototype.clickEventIsSignificant=function(e){return!(e.defaultPrevented||e.target.isContentEditable||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},n.prototype.getVisitableLinkForNode=function(e){return this.nodeIsVisitable(e)?t.closest(e,"a[href]:not([target]):not([download])"):void 0},n.prototype.getVisitableLocationForLink=function(e){var n;return n=new t.Location(e.getAttribute("href")),this.locationIsVisitable(n)?n:void 0},n.prototype.getActionForLink=function(e){var t;return null!=(t=e.getAttribute("data-turbolinks-action"))?t:"advance"},n.prototype.nodeIsVisitable=function(e){var n;return!(n=t.closest(e,"[data-turbolinks]"))||"false"!==n.getAttribute("data-turbolinks")},n.prototype.locationIsVisitable=function(e){return e.isPrefixedBy(this.view.getRootLocation())&&e.isHTML()},n.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},n.prototype.getRestorationDataForIdentifier=function(e){var t;return null!=(t=this.restorationData)[e]?t[e]:t[e]={}},n}()}.call(this),function(){!function(){var e,t;if((e=t=document.currentScript)&&!t.hasAttribute("data-turbolinks-suppress-warning"))for(;e=e.parentNode;)if(e===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",t.outerHTML)}()}.call(this),function(){var e,n,i;t.start=function(){return n()?(null==t.controller&&(t.controller=e()),t.controller.start()):void 0},n=function(){return null==window.Turbolinks&&(window.Turbolinks=t),i()},e=function(){var e;return(e=new t.Controller).adapter=new t.BrowserAdapter(e),e},(i=function(){return window.Turbolinks===t})()&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(){"use strict";document.addEventListener("turbolinks:click",function(e){"#"===e.target.getAttribute("href").charAt(0)&&(Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(e.data.url,Turbolinks.uuid()),e.preventDefault())})}.call(this),function(){function e(e){return e>=200&&e<300||404==e}window.Turbolinks.HttpRequest.prototype.requestLoaded=function(){return this.endRequest(function(){return e(this.xhr.status)?this.delegate.requestCompletedWithResponse(this.xhr.responseText,this.xhr.getResponseHeader("Turbolinks-Location")):(this.failed=!0,this.delegate.requestFailedWithStatusCode(this.xhr.status,this.xhr.responseText))}.bind(this))}}(),window.idhb&&!idhb.que&&(idhb.que={push:e=>e()},idhb.requestAds=(({callback:e})=>{"function"==typeof e&&e()}),idhb=new Proxy(idhb,{get:(e,t)=>t in e?"function"==typeof e[t]?e[t].bind(e):e[t]:()=>{}})),function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var t=e.Rails;(function(){(function(){var e;e=null,t.loadCSPNonce=function(){var t;return e=null!=(t=document.querySelector("meta[name=csp-nonce]"))?t.content:void 0},t.cspNonce=function(){return null!=e?e:t.loadCSPNonce()}}).call(this),function(){var e,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,t.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},e="_ujsData",t.getData=function(t,n){var i;return null!=(i=t[e])?i[n]:void 0},t.setData=function(t,n,i){return null==t[e]&&(t[e]={}),t[e][n]=i},t.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}.call(this),function(){var e,n,i;e=t.$,i=t.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=t.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},t.CSRFProtection=function(e){var t;if(null!=(t=i()))return e.setRequestHeader("X-CSRF-Token",t)},t.refreshCSRFTokens=function(){var t,o;if(o=i(),t=n(),null!=o&&null!=t)return e('form input[name="'+t+'"]').forEach(function(e){return e.value=o})}}.call(this),function(){var e,n,i,o;i=t.matches,"function"!=typeof(e=window.CustomEvent)&&((e=function(e,t){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype,o=e.prototype.preventDefault,e.prototype.preventDefault=function(){var e;return e=o.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),e}),n=t.fire=function(t,n,i){var o;return o=new e(n,{bubbles:!0,cancelable:!0,detail:i}),t.dispatchEvent(o),!o.defaultPrevented},t.stopEverything=function(e){return n(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.delegate=function(e,t,n,o){return e.addEventListener(n,function(e){var n;for(n=e.target;n instanceof Element&&!i(n,t);)n=n.parentNode;if(n instanceof Element&&!1===o.call(n,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var e,n,i,o,r,s;o=t.cspNonce,n=t.CSRFProtection,t.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},t.ajax=function(e){var t;return e=r(e),t=i(e,function(){var n,i;return i=s(null!=(n=t.response)?n:t.responseText,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(i,t.statusText,t):"function"==typeof e.error&&e.error(i,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0}),!(null!=e.beforeSend&&!e.beforeSend(t,e))&&(t.readyState===XMLHttpRequest.OPENED?t.send(e.data):void 0)},r=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},i=function(e,t){var i;return(i=new XMLHttpRequest).open(e.type,e.url,!0),i.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(i)),i.withCredentials=!!e.withCredentials,i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)return t(i)},i},s=function(e,t){var n,i;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(r){}else if(t.match(/\b(?:java|ecma)script\b/))(i=document.createElement("script")).setAttribute("nonce",o()),i.text=e,document.head.appendChild(i).parentNode.removeChild(i);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(r){}}return e},t.href=function(e){return e.href},t.isCrossDomain=function(e){var t,n;(t=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(i){return i,!0}}}.call(this),function(){var e,n;e=t.matches,n=function(e){return Array.prototype.slice.call(e)},t.serializeElement=function(t,i){var o,r;return o=[t],e(t,"form")&&(o=n(t.elements)),r=[],o.forEach(function(t){if(t.name&&!t.disabled)return e(t,"select")?n(t.options).forEach(function(e){if(e.selected)return r.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?r.push({name:t.name,value:t.value}):void 0}),i&&r.push(i),r.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},t.formElements=function(t,i){return e(t,"form")?n(t.elements).filter(function(t){return e(t,i)}):n(t.querySelectorAll(i))}}.call(this),function(){var e,n,i;n=t.fire,i=t.stopEverything,t.handleConfirm=function(t){if(!e(this))return i(t)},e=function(e){var t,i,o;if(!(o=e.getAttribute("data-confirm")))return!0;if(t=!1,n(e,"confirm")){try{t=confirm(o)}catch(r){}i=n(e,"confirm:complete",[t])}return t&&i}}.call(this),function(){var e,n,i,o,r,s,a,l,c,u,d;c=t.matches,l=t.getData,u=t.setData,d=t.stopEverything,a=t.formElements,t.handleDisabledElement=function(e){if(this.disabled)return d(e)},t.enableElement=function(e){var n;return n=e instanceof Event?e.target:e,c(n,t.linkDisableSelector)?s(n):c(n,t.buttonDisableSelector)||c(n,t.formEnableSelector)?o(n):c(n,t.formSubmitSelector)?r(n):void 0},t.disableElement=function(o){var r;return r=o instanceof Event?o.target:o,c(r,t.linkDisableSelector)?i(r):c(r,t.buttonDisableSelector)||c(r,t.formDisableSelector)?e(r):c(r,t.formSubmitSelector)?n(r):void 0},i=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(u(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",d),u(e,"ujs:disabled",!0)},s=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(e.innerHTML=t,u(e,"ujs:enable-with",null)),e.removeEventListener("click",d),u(e,"ujs:disabled",null)},n=function(n){return a(n,t.formDisableSelector).forEach(e)},e=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(c(e,"button")?(u(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(u(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,u(e,"ujs:disabled",!0)},r=function(e){return a(e,t.formEnableSelector).forEach(o)},o=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(c(e,"button")?e.innerHTML=t:e.value=t,u(e,"ujs:enable-with",null)),e.disabled=!1,u(e,"ujs:disabled",null)}}.call(this),function(){var e;e=t.stopEverything,t.handleMethod=function(n){var i,o,r,s,a,l,c;if(c=(l=this).getAttribute("data-method"))return a=t.href(l),o=t.csrfToken(),i=t.csrfParam(),r=document.createElement("form"),s="<input name='_method' value='"+c+"' type='hidden' />",null==i||null==o||t.isCrossDomain(a)||(s+="<input name='"+i+"' value='"+o+"' type='hidden' />"),s+='<input type="submit" />',r.method="post",r.action=a,r.target=l.target,r.innerHTML=s,r.style.display="none",document.body.appendChild(r),r.querySelector('[type="submit"]').click(),e(n)}}.call(this),function(){var e,n,i,o,r,s,a,l,c,u=[].slice;s=t.matches,i=t.getData,l=t.setData,n=t.fire,c=t.stopEverything,e=t.ajax,o=t.isCrossDomain,a=t.serializeElement,r=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},t.handleRemote=function(d){var h,p,f,m,g,v,y;return!r(m=this)||(n(m,"ajax:before")?(y=m.getAttribute("data-with-credentials"),f=m.getAttribute("data-type")||"script",s(m,t.formSubmitSelector)?(h=i(m,"ujs:submit-button"),g=i(m,"ujs:submit-button-formmethod")||m.method,v=i(m,"ujs:submit-button-formaction")||m.getAttribute("action")||location.href,"GET"===g.toUpperCase()&&(v=v.replace(/\?.*$/,"")),"multipart/form-data"===m.enctype?(p=new FormData(m),null!=h&&p.append(h.name,h.value)):p=a(m,h),l(m,"ujs:submit-button",null),l(m,"ujs:submit-button-formmethod",null),l(m,"ujs:submit-button-formaction",null)):s(m,t.buttonClickSelector)||s(m,t.inputChangeSelector)?(g=m.getAttribute("data-method"),v=m.getAttribute("data-url"),p=a(m,m.getAttribute("data-params"))):(g=m.getAttribute("data-method"),v=t.href(m),p=m.getAttribute("data-params")),e({type:g||"GET",url:v,data:p,dataType:f,beforeSend:function(e,t){return n(m,"ajax:beforeSend",[e,t])?n(m,"ajax:send",[e]):(n(m,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],n(m,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],n(m,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],n(m,"ajax:complete",e)},crossDomain:o(v),withCredentials:null!=y&&"false"!==y}),c(d)):(n(m,"ajax:stopped"),!1))},t.formSubmitButtonClick=function(){var e,t;if(t=(e=this).form)return e.name&&l(t,"ujs:submit-button",{name:e.name,value:e.value}),l(t,"ujs:formnovalidate-button",e.formNoValidate),l(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),l(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},t.preventInsignificantClick=function(e){var t,n,i,o;if(o=((i=this).getAttribute("data-method")||"GET").toUpperCase(),t=i.getAttribute("data-params"),n=(e.metaKey||e.ctrlKey)&&"GET"===o&&!t,null!=e.button&&0!==e.button||n)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,i,o,r,s,a,l,c,u,d,h,p,f,m;if(s=t.fire,i=t.delegate,l=t.getData,e=t.$,m=t.refreshCSRFTokens,n=t.CSRFProtection,p=t.loadCSPNonce,r=t.enableElement,o=t.disableElement,u=t.handleDisabledElement,c=t.handleConfirm,f=t.preventInsignificantClick,h=t.handleRemote,a=t.formSubmitButtonClick,d=t.handleMethod,"undefined"!=typeof jQuery&&null!==jQuery&&null!=jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=t,jQuery.ajaxPrefilter(function(e,t,i){if(!e.crossDomain)return n(i)})}t.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(t.formEnableSelector).forEach(function(e){if(l(e,"ujs:disabled"))return r(e)}),e(t.linkDisableSelector).forEach(function(e){if(l(e,"ujs:disabled"))return r(e)})}),i(document,t.linkDisableSelector,"ajax:complete",r),i(document,t.linkDisableSelector,"ajax:stopped",r),i(document,t.buttonDisableSelector,"ajax:complete",r),i(document,t.buttonDisableSelector,"ajax:stopped",r),i(document,t.linkClickSelector,"click",f),i(document,t.linkClickSelector,"click",u),i(document,t.linkClickSelector,"click",c),i(document,t.linkClickSelector,"click",o),i(document,t.linkClickSelector,"click",h),i(document,t.linkClickSelector,"click",d),i(document,t.buttonClickSelector,"click",f),i(document,t.buttonClickSelector,"click",u),i(document,t.buttonClickSelector,"click",c),i(document,t.buttonClickSelector,"click",o),i(document,t.buttonClickSelector,"click",h),i(document,t.inputChangeSelector,"change",u),i(document,t.inputChangeSelector,"change",c),i(document,t.inputChangeSelector,"change",h),i(document,t.formSubmitSelector,"submit",u),i(document,t.formSubmitSelector,"submit",c),i(document,t.formSubmitSelector,"submit",h),i(document,t.formSubmitSelector,"submit",function(e){return setTimeout(function(){return o(e)},13)}),i(document,t.formSubmitSelector,"ajax:send",o),i(document,t.formSubmitSelector,"ajax:complete",r),i(document,t.formInputClickSelector,"click",f),i(document,t.formInputClickSelector,"click",u),i(document,t.formInputClickSelector,"click",c),i(document,t.formInputClickSelector,"click",a),document.addEventListener("DOMContentLoaded",m),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===t&&s(document,"rails:attachBindings")&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";var e="undefined"!=typeof window,t=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=e&&"IntersectionObserver"in window,i=e&&"classList"in document.createElement("p"),o={elements_selector:"img",container:t||e?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},r=function(e,t){var n,i=new e(t);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:i}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:i})}window.dispatchEvent(n)},s=function(e,t){return e.getAttribute("data-"+t)},a=function(e,t,n){var i="data-"+t;null!==n?e.setAttribute(i,n):e.removeAttribute(i)},l=function(e){return"true"===s(e,"was-processed")},c=function(e,t){return a(e,"ll-timeout",t)},u=function(e){return s(e,"ll-timeout")},d=function(e,t){e&&e(t)},h=function(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&d(e._settings.callback_finish)},p=function(e){for(var t,n=[],i=0;t=e.children[i];i+=1)"SOURCE"===t.tagName&&n.push(t);return n},f=function(e,t,n){n&&e.setAttribute(t,n)},m=function(e,t){f(e,"sizes",s(e,t.data_sizes)),f(e,"srcset",s(e,t.data_srcset)),f(e,"src",s(e,t.data_src))},g={IMG:function(e,t){var n=e.parentNode;n&&"PICTURE"===n.tagName&&p(n).forEach(function(e){m(e,t)}),m(e,t)},IFRAME:function(e,t){f(e,"src",s(e,t.data_src))},VIDEO:function(e,t){p(e).forEach(function(e){f(e,"src",s(e,t.data_src))}),f(e,"src",s(e,t.data_src)),e.load()}},v=function(e,t){var n,i,o=t._settings,r=e.tagName,a=g[r];if(a)return a(e,o),h(t,1),void(t._elements=(n=t._elements,i=e,n.filter(function(e){return e!==i})));!function(e,t){var n=s(e,t.data_src),i=s(e,t.data_bg);n&&(e.style.backgroundImage='url("'.concat(n,'")')),i&&(e.style.backgroundImage=i)}(e,o)},y=function(e,t){i?e.classList.add(t):e.className+=(e.className?" ":"")+t},b=function(e,t,n){e.addEventListener(t,n)},w=function(e,t,n){e.removeEventListener(t,n)},S=function(e,t,n){w(e,"load",t),w(e,"loadeddata",t),w(e,"error",n)},E=function(e,t,n){var o=n._settings,r=t?o.class_loaded:o.class_error,s=t?o.callback_loaded:o.callback_error,a=e.target;!function(e,t){i?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}(a,o.class_loading),y(a,r),d(s,a),h(n,-1)},L=function(e,t){var n=function o(n){E(n,!0,t),S(e,o,i)},i=function r(i){E(i,!1,t),S(e,n,r)};!function(e,t,n){b(e,"load",t),b(e,"loadeddata",t),b(e,"error",n)}(e,n,i)},T=["IMG","IFRAME","VIDEO"],k=function(e,t){var n=t._observer;I(e,t),n&&t._settings.auto_unobserve&&n.unobserve(e)},_=function(e){var t=u(e);t&&(clearTimeout(t),c(e,null))},C=function(e,t){var n=t._settings.load_delay,i=u(e);i||(i=setTimeout(function(){k(e,t),_(e)},n),c(e,i))},I=function(e,t,n){var i=t._settings;!n&&l(e)||(T.indexOf(e.tagName)>-1&&(L(e,t),y(e,i.class_loading)),v(e,t),function(e){a(e,"was-processed","true")}(e),d(i.callback_reveal,e),d(i.callback_set,e))},x=function(e){return!!n&&(e._observer=new IntersectionObserver(function(t){t.forEach(function(t){return function(e){return e.isIntersecting||e.intersectionRatio>0}(t)?function(e,t){var n=t._settings;d(n.callback_enter,e),n.load_delay?C(e,t):k(e,t)}(t.target,e):function(e,t){var n=t._settings;d(n.callback_exit,e),n.load_delay&&_(e)}(t.target,e)})},{root:(t=e._settings).container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}),!0);var t},A=["IMG","IFRAME"],P=function(e,t){return function(e){return e.filter(function(e){return!l(e)})}((n=e||function(e){return e.container.querySelectorAll(e.elements_selector)}(t),Array.prototype.slice.call(n)));var n},R=function(e,t){this._settings=function(e){return _extends({},o,e)}(e),this._loadingCount=0,x(this),this.update(t)};return R.prototype={update:function(e){var n,i=this,o=this._settings;this._elements=P(e,o),!t&&this._observer?(o.use_native&&"loading"in HTMLImageElement.prototype&&((n=this)._elements.forEach(function(e){-1!==A.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),I(e,n))}),this._elements=P(e,o)),this._elements.forEach(function(e){i._observer.observe(e)})):this.loadAll()},destroy:function(){var e=this;this._observer&&(this._elements.forEach(function(t){e._observer.unobserve(t)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){I(e,this,t)},loadAll:function(){var e=this;this._elements.forEach(function(t){k(t,e)})}},e&&function(e,t){if(t)if(t.length)for(var n,i=0;n=t[i];i+=1)r(e,n);else r(e,t)}(R,window.lazyLoadOptions),R});var helpers=function(){var e={},t=window.localStorage;return e.setAttributes=function(e,t){for(var n in t)e.setAttribute(n,t[n])},e.display_toast=function(e,t,n,i,o){var r=document.createElement("div");r.classList.add("toast","slide-down",e,i);var s="";t&&(s="\n        <strong>"+t+"</strong>\n    "),n&&(s=s+" "+n);var a=document.createElement("div");if(a.classList.add("message"),a.innerHTML=s,!o&&("success"===e||"warning"===e||"error"===e)){var l=document.createElement("span");l.classList.add(e),r.appendChild(l)}if(o){var c=document.createElement("span");c.classList.add("image"),c.innerHTML='<img src="'+o+'" alt="notification image" />',r.appendChild(c)}var u=document.createElement("span");u.classList.add("close"),u.innerHTML='\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 19 19" style="enable-background:new 0 0 19 19;" xml:space="preserve">\n        <style type="text/css">\n        .st0{fill:#FFFFFF;}\n        </style>\n        <g id="Group_1348" transform="translate(-787.185 -300.52) rotate(-45)">\n          <path id="Rectangle_684" class="st0" d="M333.6,781.1h21c0.8,0,1.5,0.7,1.5,1.5l0,0c0,0.8-0.7,1.5-1.5,1.5h-21c-0.8,0-1.5-0.7-1.5-1.5l0,0C332.1,781.7,332.8,781.1,333.6,781.1z"/>\n          <path id="Rectangle_685" class="st0" d="M342.6,793.1v-21c0-0.8,0.7-1.5,1.5-1.5l0,0c0.8,0,1.5,0.7,1.5,1.5v21c0,0.8-0.7,1.5-1.5,1.5l0,0C343.3,794.6,342.6,793.9,342.6,793.1z"/>\n        </g>\n      </svg>',r.appendChild(a),r.appendChild(u),document.body.appendChild(r);var d=function(){clearTimeout(h),r.classList.add("slide-up");var e=setTimeout(function(){clearTimeout(e),r.remove()},200)};r.addEventListener("click",d);var h=setTimeout(function(){d()},5e3)},e.add_referrer_to_embedded_url=function(e){var t="gd_sdk_referrer_url="+encodeURIComponent(window.location.href),n=/(?:(src|data)=")([\s\S]*?)(?=")/;return e.replace(n,function(e){return e+(-1!=e.indexOf("?")?"&":"?")+t})},e.debounce=function(e,t,n){var i=undefined;return function(){function o(){n||e.apply(r,s),i=null}var r=this,s=arguments;i?clearTimeout(i):n&&e.apply(r,s),i=setTimeout(o,t||100)}},e.parseItem=function(e){return e?!(e=JSON.parse(e))||!e.expires||e.expires<+new Date?undefined:e.data:undefined},e.hasStorage=function(){try{return t.setItem("foo","1"),t.removeItem("foo"),!0}catch(e){return!1}},e.setItem=function(e,n,i){i=i||31536e4;var o=JSON.stringify({data:n,expires:+new Date+1e3*i});return t.setItem(e,o),n},e.getItem=function(n){var i=t.getItem(n);return e.parseItem(i)},e.getToken=function(){var e=new RegExp("(?:^|;\\s*)token\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*").exec(document.cookie);return e&&e[1]?unescape(e[1]):undefined},e.getNavigationStartTime=function(){var e=window,t=(new Date).getTime(),n=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance||!1;return n&&n.timing&&n.timing.navigationStart?n.timing.navigationStart:e.SpilGames&&e.SpilGames.navStartFallback?function(){return e.SpilGames.navStartFallback}:function(){return t}},e.getTiming=function(e){return parseInt(+new Date-e,10)},e.getPageId=function(){return window.hasOwnProperty("game")&&window.game.spil_id},e.getPageTypeDetail=function(){var e=document.querySelector("[data-pagetype-detail]");return e?e.dataset.pagetypeDetail:""},e.getPageType=function(){var e=document.querySelector("[data-pagetype]");return e?e.dataset.pagetype:""},e.get_utm_param=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.is_empty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.getNavigationType=function(){if(window.performance)return window.performance.getEntriesByType("navigation").length?window.performance.getEntriesByType("navigation")[0].type:null},e}();window.PureJSCarousel=function(e){this.carousel=document.querySelector(e.carousel),this.slides=this.carousel.querySelectorAll(e.slide),this.slides.length&&(this.btnNext=this.carousel.querySelector(e.btnNext)||null,this.btnPrev=this.carousel.querySelector(e.btnPrev)||null,this.activeIndex=e.activeIndex||0,this.oneByOne=e.oneByOne||!1,this.speed=e.speed||400,this.delay=e.delay||0,this.effect=e.effect||"linear",this.infinite=e.infinite||!1,this.autoplay=e.autoplay||!1,this.autoplayDelay=e.autoplayDelay||400,this.autoplayDirection=e.autoplayDirection||"next",this.autoplayTimer=null,this.minPos=null,this.slidesToShow=null,this.maxIndex=null,this.isEnabled=null,this.initialized=!1,this.lazy=e.lazy||!1,this.build(),this.initialized=!0)},PureJSCarousel.prototype.build=function(){function e(e,t){e.addEventListener("click",function(){t.goToSlide(parseInt(this.getAttribute("data-index")))})}function t(){window.innerWidth===r&&window.innerHeight===s||(n.destroy(),n.build(n.lazy),n.lazy&&setup_lazy())}const n=this;let i,o;const r=window.innerWidth,s=window.innerHeight;n.minPos=n.carousel.offsetWidth-n.slides.length*n.slides[0].offsetWidth,n.slidesToShow=Math.round(n.carousel.offsetWidth/n.slides[0].offsetWidth),n.maxIndex=0,n.isEnabled=1,n.carousel.className+=" purejscarousel",n.slidesContainer=document.createElement("div"),n.carousel.parentElement.insertBefore(n.slidesContainer,n.carousel),n.slidesContainer.className+=" purejscarousel-slides-container",!0===n.infinite?(n.slidesContainer.style.marginLeft=`${-n.slides[0].offsetWidth*n.slides.length}px`,n.slidesContainer.style.width=`${n.slides[0].offsetWidth*n.slides.length*3}px`):(n.slidesContainer.style.marginLeft="0px",n.slidesContainer.style.width=`${n.slides[0].offsetWidth*n.slides.length}px`),("ontouchstart"in window||navigator.maxTouchPoints)&&(n.slidesContainer.addEventListener("touchstart",function(e){this.setAttribute("data-start-touch-x",e.targetTouches[0].pageX),this.setAttribute("data-start-margin",parseInt(this.style.marginLeft))}),n.slidesContainer.addEventListener("touchmove",function(e){this.setAttribute("data-active-touch-x",e.targetTouches[0].pageX),this.style.marginLeft=`${parseInt(this.getAttribute("data-start-margin"))+(parseInt(this.getAttribute("data-active-touch-x"))-parseInt(this.getAttribute("data-start-touch-x")))}px`}),n.slidesContainer.addEventListener("touchend",function(){const e=parseInt(this.getAttribute("data-active-touch-x"))-parseInt(this.getAttribute("data-start-touch-x"))>0?"prev":"next",t=!0===n.oneByOne?n.slides[0].offsetWidth:n.carousel.offsetWidth;Math.abs(parseInt(this.getAttribute("data-active-touch-x"))-parseInt(this.getAttribute("data-start-touch-x")))>=t/2?!0===n.infinite?"next"===e?n.goToNextSlide():n.goToPrevSlide():"next"===e&&n.activeIndex<n.maxIndex||"prev"===e&&n.activeIndex>0?"next"===e?n.goToNextSlide():n.goToPrevSlide():("undefined"!==n.slidesContainer.style.transition&&(n.slidesContainer.style.transition=`margin-left ${n.speed}ms`+` ${n.effect} ${n.delay}ms`),n.slidesContainer.style.marginLeft=`${parseInt(this.getAttribute("data-start-margin"))}px`,"undefined"===n.slidesContainer.style.transition?"undefined"!==n.slidesContainer.style.transition&&(n.slidesContainer.style.transition=null):setTimeout(()=>{"undefined"!==n.slidesContainer.style.transition&&(n.slidesContainer.style.transition=null)},n.speed+n.delay)):("undefined"!==n.slidesContainer.style.transition&&(n.slidesContainer.style.transition=`margin-left ${n.speed}ms`+` ${n.effect} ${n.delay}ms`),n.slidesContainer.style.marginLeft=`${parseInt(this.getAttribute("data-start-margin"))}px`,"undefined"===n.slidesContainer.style.transition?"undefined"!==n.slidesContainer.style.transition&&(n.slidesContainer.style.transition=null):setTimeout(()=>{"undefined"!==n.slidesContainer.style.transition&&(n.slidesContainer.style.transition=null)},n.speed+n.delay))})),n.dotsContainer=document.createElement("div"),n.carousel.parentElement.insertBefore(n.dotsContainer,n.carousel),
n.carousel.parentElement.insertBefore(n.dotsContainer,n.carousel),n.dotsContainer.className+=" purejscarousel-dots-container",n.dots=[],i=!0===n.oneByOne?!0===n.infinite?n.slides.length:(n.slidesContainer.offsetWidth-n.carousel.offsetWidth)/n.slides[0].offsetWidth+1:!0===n.infinite?Math.ceil(n.slidesContainer.offsetWidth/n.carousel.offsetWidth/3):!0===n.infinite?Math.ceil(n.slidesContainer.offsetWidth/n.carousel.offsetWidth/3):Math.ceil(n.slidesContainer.offsetWidth/n.carousel.offsetWidth);for(o=0;o<i;o++){const t=document.createElement("button");t.className=`purejscarousel-dot${0===o?" active":""}`,t.setAttribute("data-index",o),t.setAttribute("type","button"),n.lazy?(t.setAttribute("aria-label","carouseldot"),t.setAttribute("name","carouseldot")):t.setAttribute("aria-label","button"),e(t,n),n.dots.push(t),n.dotsContainer.appendChild(t)}for(n.maxIndex=i-1,n.btnPrev?n.btnPrev.setAttribute("data-is-native",1):(n.btnPrev=document.createElement("button"),n.btnPrev.setAttribute("class",""),n.btnPrev.setAttribute("type","button"),n.btnPrev.setAttribute("aria-label","carousepreview"),n.btnPrev.setAttribute("name","carouselpreview"),n.btnPrev.setAttribute("data-is-native",0),n.carousel.parentElement.insertBefore(n.btnPrev,n.carousel)),n.btnPrev.className+=" purejscarousel-btn purejscarousel-btn-prev",n.btnPrev.addEventListener("click",()=>{n.goToPrevSlide()}),0===n.activeIndex&&(n.infinite||(n.btnPrev.disabled=!0)),n.btnNext?n.btnNext.setAttribute("data-is-native",1):(n.btnNext=document.createElement("button"),n.btnNext.setAttribute("class",""),n.btnNext.setAttribute("type","button"),n.btnNext.setAttribute("data-is-native",0),n.btnNext.setAttribute("aria-label","carouselnext"),n.btnNext.setAttribute("name","carouselnext"),n.carousel.parentElement.insertBefore(n.btnNext,n.carousel)),n.btnNext.className+=" purejscarousel-btn purejscarousel-btn-next",n.btnNext.addEventListener("click",()=>{n.goToNextSlide()}),n.activeIndex===n.maxIndex&&(n.infinite||(n.btnNext.disabled=!0)),o=0;o<n.slides.length;o++)n.slidesContainer.appendChild(n.slides[o]);if(!0===n.infinite){for(o=0;o<n.slides.length;o++)(a=n.slides[o].cloneNode(!0)).className+=" purejscarousel-slide-clone",n.slidesContainer.appendChild(a);for(o=0;o<n.slides.length;o++){var a;(a=n.slides[o].cloneNode(!0)).className+=" purejscarousel-slide-clone",n.slidesContainer.insertBefore(a,n.slidesContainer.querySelectorAll(".purejscarousel-slide")[o])}}n.initialized||window.addEventListener("resize",helpers.debounce(t,400)),n.autoplayTimer=!0===n.autoplay?"next"===n.autoplayDirection?setTimeout(()=>{n.goToNextSlide()},n.autoplayDelay):setTimeout(()=>{n.goToPrevSlide()},n.autoplayDelay):null},PureJSCarousel.prototype.enableControl=function(){let e;for(this.btnNext.disabled=!1,this.btnPrev.disabled=!1,e=0;e<this.dots.length;e++)this.dots[e].disabled=!1;this.dots[this.activeIndex].disabled=!0,!1===this.infinite&&(this.activeIndex===this.maxIndex&&(this.btnNext.disabled=!0),0===this.activeIndex&&(this.btnPrev.disabled=!0)),("ontouchstart"in window||navigator.maxTouchPoints)&&(this.slidesContainer.disabled=!1)},PureJSCarousel.prototype.disableControl=function(){let e;for(this.btnNext.disabled=!0,this.btnPrev.disabled=!0,e=0;e<this.dots.length;e++)this.dots[e].disabled=!0;("ontouchstart"in window||navigator.maxTouchPoints)&&(this.slidesContainer.disabled=!0)},PureJSCarousel.prototype.goToNextSlide=function(){let e;!1===this.btnNext.disabled&&(e=!0===this.infinite&&this.activeIndex+1>this.maxIndex?0:this.activeIndex+1,this.goToSlide(e,"next","dirBtn"))},PureJSCarousel.prototype.goToPrevSlide=function(){let e;!1===this.btnPrev.disabled&&(e=!0===this.infinite&&this.activeIndex-1<0?this.maxIndex:this.activeIndex-1,this.goToSlide(e,"prev","dirBtn"))},PureJSCarousel.prototype.goToSlide=function(e,t,n){function i(){let t;if("transition"in document.body.style&&(o.slidesContainer.style.transition=null,o.slidesContainer.removeEventListener("transitionend",i)),o.dots[o.activeIndex].className=o.dots[o.activeIndex].className.replace(" active",""),o.activeIndex=e,o.dots[o.activeIndex].className+=" active",!0===o.infinite){for(t=0;t<c;t++)"next"===r?o.slidesContainer.appendChild(o.slidesContainer.children[0]):o.slidesContainer.insertBefore(o.slidesContainer.lastElementChild,o.slidesContainer.children[0]);o.slidesContainer.style.marginLeft=`${-o.slidesContainer.offsetWidth/3}px`}o.enableControl(),o.autoplayTimer=!0===o.autoplay?"next"===o.autoplayDirection?setTimeout(function(){o.goToNextSlide()},o.autoplayDelay):setTimeout(function(){o.goToPrevSlide()},o.autoplayDelay):null}const o=this,r=t||(e>this.activeIndex?"next":"prev"),s=this.slidesContainer.offsetWidth/(!0===this.infinite?3:1),a=!0===this.oneByOne?this.slides[0].offsetWidth:this.carousel.offsetWidth,l=!0===this.infinite?-s:Math.max(-a*this.activeIndex,this.minPos);let c,u,d="dirBtn"===n?a:Math.abs(a*(this.activeIndex-e));!1===this.oneByOne&&("next"===r&&e===this.maxIndex||"prev"===r&&this.activeIndex===this.maxIndex)&&(d=d+s-(this.maxIndex+1)*a),c=d/this.slides[0].offsetWidth,u=!0===this.infinite?"next"===r?l-d:l+d:"next"===r?Math.max(this.minPos,l-d):Math.min(0,l+d),this.disableControl(),"transition"in document.body.style&&(this.slidesContainer.style.transition=`margin-left ${this.speed}ms`+` ${this.effect} ${this.delay}ms`),this.slidesContainer.style.marginLeft=`${u}px`,"transition"in document.body.style?this.slidesContainer.addEventListener("transitionend",i):i()},PureJSCarousel.prototype.destroy=function(){let e,t;if(1===this.isEnabled){if(this.isEnabled=0,this.carousel.className=this.carousel.className.replace(" purejscarousel",""),this.carousel.parentElement.removeChild(this.dotsContainer),"1"===this.btnNext.getAttribute("data-is-native").toString()?this.btnNext.className=this.btnNext.className.replace(" purejscarousel-btn purejscarousel-btn-next",""):(this.carousel.parentElement.removeChild(this.btnNext),this.btnNext=null),"1"===this.btnPrev.getAttribute("data-is-native").toString()?this.btnPrev.className=this.btnPrev.className.replace(" purejscarousel-btn purejscarousel-btn-prev",""):(this.carousel.parentElement.removeChild(this.btnPrev),this.btnPrev=null),!0===this.infinite)for(e=this.carousel.querySelectorAll(".purejscarousel-slide-clone"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(t=0;t<this.slides.length;t++)this.slides[t].className=this.slides[t].className.replace(" pure-js-carousel-slide",""),this.carousel.parentElement.insertBefore(this.slides[t],this.slidesContainer);this.carousel.parentElement.removeChild(this.slidesContainer),this.minPos=null,this.slidesToShow=null,this.maxIndex=null,this.isEnabled=null,!0===this.autoplay&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=null)}};var _slicedToArray=function(){function e(e,t){var n=[],i=!0,o=!1,r=undefined;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};helpers.hasStorage&&helpers.setItem("pageInSession",Date.now()),document.addEventListener("turbolinks:before-visit",function(){helpers.hasStorage&&helpers.setItem("pageInSession",Date.now())});var TrackerService=function(){var e=arguments.length<=0||arguments[0]===undefined||arguments[0];this.init(e),this.pageInSession=helpers.getItem("pageInSession")};TrackerService.prototype={init:function(e){this.environment="",this.token=window.site?window.site.token:"",this.endpoint="https://logs.spilgames.com/lg/pb/1/ut/",this.visitorId=helpers.hasStorage&&helpers.setItem("set-visitorId",helpers.getItem("set-visitorId")||Math.floor(1e15*Math.random()),0),this.sessionId=helpers.setItem("set-sessionId",helpers.getItem("set-sessionId")||+new Date,3600),this.gameUpdateEventValue=0,this.processedFlag="data-ctr-processed",this.storageKey="trackerCollection",this.settingsId="page_content",this.settingsClass=".tile-thumbnail img.lazy:not(."+this.processedFlag+"):not(.non-tracked)",this.settingsThumb={sending:[],viewed:[]},this.user_info={},this.config={time:{start:helpers.getNavigationStartTime()},google_tags:{}},!0===e&&this.run()},run:function(){var e=this,t=this;document.addEventListener("turbolinks:load",function(){t.environment=window.site.environment,t.token=window.site.token,t.user_info={environment:window.site.environment,token:t.token,visitorId:t.visitorId,sessionId:t.sessionId,pageInSession:t.pageInSession},helpers.is_empty(location.search)||(e.config.google_tags={adwordsAdgroupId:helpers.get_utm_param("adwordsAdgroupId"),campaignElement:helpers.get_utm_param("utm_content"),campaignName:helpers.get_utm_param("utm_campaign"),campaignMedium:helpers.get_utm_param("utm_medium"),campaignSource:helpers.get_utm_param("campaignsource")}),e.linksWatch(),e.eventSender(),e.pageView(),document.body.stop_tracker||e.thumbnailTrack(e.settingsId)}),window.addEventListener("popstate",function(){window.refererTag="browser_back_forward"})},heartbeat:function(){var e={eventCategory:"heartbeat",eventAction:"ping",timing:helpers.getTiming(this.config.time.start.toString()),pageInSession:this.pageInSession,properties:{pageType:helpers.getPageType(),pageTypeDetail:helpers.getPageTypeDetail(),portalVersion:"widgets-"+window.site.spil_channel_name,theme:window.theme||null,hasgdprconsent:!1,testGroup:"default",testVariant:"default",deviceType:window.site.is_mobile}};helpers.getPageId()&&Object.assign(e.properties,{pageId:helpers.getPageId()}),this.collect(e)},walkthrough:function(){var e={eventList:[{eventCategory:"walkthrough",eventAction:"requested",properties:{player:"tubia"},pageInSession:this.pageInSession,testGroup:"default",testVariant:"default",timing:helpers.getTiming(this.config.time.start.toString())}]};this.collect(e)},pageView:function(){var e="browser_"+helpers.getNavigationType();window.refererTag?e=window.refererTag:helpers.getItem("refererTag")&&(e=helpers.getItem("refererTag"));var t={pageType:helpers.getPageType(),pageTypeDetail:helpers.getPageTypeDetail(),portalVersion:"widgets-"+window.site.spil_channel_name,userAgent:window.navigator.userAgent,referrerURL:window.referrerURL?window.referrerURL:window.location.href,hasgdprconsent:!1,testGroup:"default",testVariant:"default",deviceType:window.site.is_mobile,referrerTag:e,pageInSession:this.pageInSession,visitorId:this.visitorId,sessionId:this.sessionId,token:this.user_info.token,environment:this.user_info.environment,requestId:"1234"};helpers.getPageId()&&Object.assign(t,{pageId:helpers.getPageId()}),helpers.is_empty(this.config.google_tags)||Object.assign(t,this.config.google_tags),this.sendPageView(t),helpers.setItem("refererTag",null)},thumbnailEvent:function(e,t){var n=this;n.settingsThumb.viewed=[];var i=t.reduce(function(e,t){return document.body.contains(t)&&(e[t.closest("[data-widget]").dataset.label]=e[t.closest("[data-widget]").dataset.label]||[],e[t.closest("[data-widget]").dataset.label].push(t)),e},Object.create(null));Object.entries(i).forEach(function(t){var i=_slicedToArray(t,2),o=(i[0],i[1]),r={eventCategory:"thumbnail",eventAction:e,testGroup:"default",testVariant:"default",timing:helpers.getTiming(n.config.time.start.toString()),pageInSession:n.pageInSession,properties:{}},s=[];new Promise(function(e){o.forEach(function(t,i){var a=t.getBoundingClientRect(),l=window.pageYOffset!==undefined?window.pageYOffset:document.documentElement.scrollTop,c=window.pageYOffset!==undefined?window.pageXOffset:document.documentElement.scrollLeft;t.classList.add(n.processedFlag);var u=t.closest("[data-widget]");s.push({id:t.dataset.appid||0,path:t.dataset.path||"-",index:t.dataset.index||0,test_group:"default",x:Math.floor(a.left+c),y:Math.floor(a.top+l)}),u&&(u.dataset.label&&Object.assign(r.properties,{label:u.dataset.label}),u.dataset.widget&&Object.assign(r.properties,{widget:u.dataset.widget})),i===o.length-1&&e()})}).then(function(){Object.assign(r.properties,{data:JSON.stringify(s)}),JSON.parse(r.properties.data).length>0&&n.sendEvent({data:[r]})})})},thumbnailTrack:function(e){var t=this,n=document.getElementById(e).querySelectorAll(this.settingsClass);window.thumbnail_observer=new MutationObserver(function(e){e.forEach(function(e){if("class"===e.attributeName){clearTimeout(t.settingsThumb.sending);var n=e.target;n.classList.contains(t.processedFlag)||(t.settingsThumb.viewed.push(n),n.classList.add(t.processedFlag)),t.settingsThumb.sending=setTimeout(function(){t.settingsThumb.viewed.length>0&&t.thumbnailEvent("view",t.settingsThumb.viewed),clearTimeout(t.settingsThumb.sending)},500),0===document.querySelectorAll(".tile-thumbnail img.lazy:not(.loaded):not(.non-tracked)").length&&window.thumbnail_observer.disconnect()}})}),n.forEach(function(e){return window.thumbnail_observer.observe(e,{attributes:!0})})},linksWatch:function(e){var t=document.querySelectorAll("a");e&&(t=e.querySelectorAll("a")),[].concat(_toConsumableArray(t)).forEach(function(e){e.addEventListener("click",function(e){var t=null,n=e.target.closest("[data-widget]");if(n){var i=e.target.dataset.index?e.target.dataset.index:"";t=n?""+n.dataset.widget:null,i&&(t+="-"+i)}window.refererTag=t,helpers.setItem("refererTag",t)})})},api:function(e){var t=[{eventCategory:"gameIntegration",eventAction:"update",eventLabel:e,eventValue:this.gameUpdateEventValue,properties:{gameType:window.is_flash?"Flash":"HTML5",appId:helpers.getPageId()},testGroup:"default",testVariant:"default",timing:helpers.getTiming(this.config.time.start.toString()),pageInSession:this.pageInSession}];this.fetchEvent({data:t,nodelay:!0})},vote:function(e){var t=[{eventAction:"vote",eventCategory:"application",properties:{applicationId:helpers.getPageId(),vote:e},testGroup:"default",testVariant:"default",timing:helpers.getTiming(this.config.time.start.toString()),pageInSession:this.pageInSession}];this.fetchEvent({data:t,nodelay:!0})},sendAdEvent:function(e,t){var n=this,i=[{eventCategory:"videoAds",eventAction:e,properties:_extends({appId:helpers.getPageId(),deviceType:window.site.is_mobile,adSource:"Google"},t),timing:helpers.getTiming(n.config.time.start.toString()),pageInSession:n.pageInSession,testGroup:"default",testVariant:"default"}];this.fetchEvent({data:i,nodelay:!0})},eventSender:function(){var e=this;setInterval(function(){e.send()},1e4),setInterval(function(){e.heartbeat()},12e4)},sendPageView:function(e){var t=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"),n=this.endpoint+"?"+t;fetch(n).then(function(e){return e.text()})["catch"](function(e){console.error("Page view request has failed. Reason: "+e)})},fetchEvent:function(e){var t=e.data;e.hasOwnProperty("nodelay")&&e.nodelay||(t=e.data.map(function(e){return e.hasOwnProperty("flagged")&&delete e.flagged,e})),this.sendEvent({data:t})},send:function(){var e=10,t=2,n=this,i=helpers.getItem(this.storageKey)||[];i.length>0&&helpers.setItem(this.storageKey,[]),i.map(function(e){return e.eventCategory}).filter(function(e,t,n){return n.indexOf(e)===t}).forEach(function(o){i.filter(function(e){return e.eventCategory===o}).map(function(e){return e.eventAction}).filter(function(e,t,n){return n.indexOf(e)===t}).forEach(function(r){var s=i.filter(function(e){return e.eventCategory===o&&e.eventAction===r&&(!e.flagged||e.flagged<t)});if(s.length>0){for(var a=[],l=0;l<s.length;l++)a.push(s[l]),l%e==0&&(n.fetchEvent({data:a}),a=[]);a.length>0&&n.fetchEvent({data:a})}})})},collect:function(e){if(helpers.hasStorage()){var t=helpers.getItem(this.storageKey);t||(t=[]),t.push(e),helpers.setItem(this.storageKey,t)}},sendEvent:function(e){var t={environment:window.site.environment,token:this.token,visitorId:this.visitorId,sessionId:this.sessionId,pageInSession:this.pageInSession},n={headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST",body:JSON.stringify(_extends({eventList:e.data},t))};fetch(this.endpoint,n)["catch"](function(t){console.error("Error happenened while fetching event: "+t);var n=helpers.getItem(storageKey)||[];(n=n.concat(e.data)).map(function(e,t){e.hasOwnProperty("flagged")?e.flagged<2?Object.assign(e,{flagged:e.flagged+=1}):n.splice(t,1):Object.assign(e,{flagged:1})}),helpers.setItem(storageKey,n)})}};var trackerServiceRun=function(){new TrackerService};window.PORTALJS.run("common","init",trackerServiceRun);var initializeVote=function(){var e={positive:document.getElementById("positive-vote"),negative:document.getElementById("negative-vote")};e.positive&&e.negative&&(e.positive.addEventListener("click",function(){positive_vote(e.positive,e.negative)}),e.negative.addEventListener("click",function(){negative_vote(e.positive,e.negative)}),localStorage.hasOwnProperty("positive_voted_games")&&(JSON.parse(localStorage.positive_voted_games).includes(window.game_id)&&disable_positive_voting(e.positive,e.negative),JSON.parse(localStorage.negative_voted_games).includes(window.game_id)&&disable_negative_voting(e.positive,e.negative)))},positive_vote=function(e,t){vote(1),new TrackerService(!1).vote(1),disable_positive_voting(e,t)},disable_positive_voting=function(e,t){disable_voting(e,t),e.classList.add("is-active"),t.classList.remove("is-active")},negative_vote=function(e,t){vote(-1),new TrackerService(!1).vote(-1),disable_negative_voting(e,t)},disable_negative_voting=function(e,t){disable_voting(e,t),t.classList.add("is-active"),e.classList.remove("is-active")},disable_voting=function(e,t){t.setAttribute("disabled",!0),e.setAttribute("disabled",!0)},vote=function(e){var t=new XMLHttpRequest;t.open("POST",window.rate_url,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify({rating:e})),send_to_localstorage(window.game_id,e)},send_to_localstorage=function(e,t){localStorage.positive_voted_games||(localStorage.positive_voted_games=JSON.stringify([])),localStorage.negative_voted_games||(localStorage.negative_voted_games=JSON.stringify([])),localStorage.positive_voted_games=JSON.stringify(JSON.parse(localStorage.positive_voted_games).filter(function(e){return e!==window.game_id})),localStorage.negative_voted_games=JSON.stringify(JSON.parse(localStorage.negative_voted_games).filter(function(e){return e!==window.game_id})),1===t?localStorage.positive_voted_games=JSON.stringify(JSON.parse(localStorage.positive_voted_games).concat(window.game_id)):localStorage.negative_voted_games=JSON.stringify(JSON.parse(localStorage.positive_voted_games).concat(window.game_id))};window.PORTALJS.run("games","show",initializeVote);var initializeAntiBounce=function(){var e=document.querySelector(".anti-bounce-popup "),t=function n(){sessionStorage.getItem("isAntiBounceShown")||(e.classList.remove("hidden"),sessionStorage.setItem("isAntiBounceShown",!0),document.removeEventListener("mouseleave",n),e.addEventListener("click",function(t){(t.target.classList.contains("anti-bounce-popup")||t.target.classList.contains("anti-bounce-popup-close"))&&e.classList.add("out")}))};document.addEventListener("mouseleave",t),document.addEventListener("turbolinks:before-visit",function(){document.removeEventListener("mouseleave",t)})},setDocumentReferrer=function(){window.referrerURL=document.referrer,window.visitingPage=window.location.href,window.pageLoadSequence=1};setDocumentReferrer(),document.addEventListener("turbolinks:load",function(){window.pageLoadSequence>1&&(window.referrerURL=window.visitingPage,window.visitingPage=window.location.href),window.pageLoadSequence+=1}),display_alert=function(){var e=arguments.length<=0||arguments[0]===undefined?null:arguments[0];e&&alert(e)},getParameterByName=function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},display_account_destroy_confirm_message=function(){document.display_deleted_notification&&display_alert(window.account_deleted_notification)},document.addEventListener("turbolinks:load",function(){display_account_destroy_confirm_message()}),document.addEventListener("turbolinks:load",function(){function e(e){e.preventDefault(),o.active&&o.active!==this.parentElement&&o.active.classList.remove("active"),this.parentElement.classList.toggle("active"),o.active=this.parentElement}function t(t){t.forEach(function(t){"new"!==t.parentElement.dataset.menuId&&(t.onclick=e)})}function n(e){e.forEach(function(e){e.onclick=null})}function i(){function e(){o.collection_items.forEach(function(e){e.classList.remove("hidden-menu-item"),r(e,!1)}),o.more_dropdown_items.forEach(function(e){e.classList.add("hidden-menu-item")}),o.more.button.classList.add("hidden")}function i(){for(var e=function(e){if(!(o.items_container.offsetHeight>o.items_container.parentElement.offsetHeight))return"break";o.collection_items[e].classList.add("hidden-menu-item"),r(o.collection_items[e],!0),o.more_dropdown_items.find(function(t){return t.dataset.menuId===o.collection_items[e].dataset.menuId}).classList.remove("hidden-menu-item"),o.more.button.classList.remove("hidden")},t=o.collection_items.length-1;t>=0;t--){if("break"===e(t))break}}function r(e,t){e.querySelectorAll(".tile-thumbnail img.lazy").forEach(function(e){return t?e.classList.add("non-tracked"):e.classList.remove("non-tracked")})}var s=document.querySelectorAll(".menu-item-button-container");if((window.innerWidth||document.documentElement.clientWidth)<=1024)t(s);else{if(e(),i(),!s.length)return;n(s)}}var o={collection_items:[].concat(_toConsumableArray(document.querySelectorAll(".menu-item:not(.more_games_tab):not(.for_you):not(.more_games-dropdown_item)"))),more_dropdown_items:[].concat(_toConsumableArray(document.querySelectorAll(".more_games-dropdown_item"))),items_container:document.getElementById("menu-items_list"),button:{show:document.querySelector(".menu-container-toggle"),hide:document.querySelector(".menu-container-closebutton")},active:null,more:{button:document.getElementById("menu-more_games_tab")},container:document.querySelector(".menu-container"),show:function(){document.body.classList.add("no-scroll--small"),o.container.classList.add("active")},hide:function(){document.body.classList.remove("no-scroll--small"),o.container.classList.remove("active")}};o.button.show&&o.button.show.addEventListener("click",o.show),o.button.hide&&o.button.hide.addEventListener("click",o.hide),document.body.addEventListener("click",function(e){e.target.classList.contains("menu-container")&&(o.hide(),o.active&&o.active.classList.remove("active"))}),document.querySelector("#wdg_header_logo .logo").onload=function(){i()},i(),window.onresize=helpers.debounce(i,100)});var readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return unescape(o.substring(t.length,o.length))}return null};document.addEventListener("turbolinks:before-render",function(){window.AdSlotsTimeoutIds&&(window.AdSlotsTimeoutIds.forEach(function(e){clearTimeout(e)}),window.AdSlotsTimeoutIds=null)});var megaSlideIntervalId,intersectionOptions={root:null,rootMargin:"0px",threshold:[0]},stickySkyscraperObserver=new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target,n=e.boundingClientRect,i=e.rootBounds;switch(t.id){case"sticky-sentinel-top":t.nextElementSibling.classList.toggle("stick-to-top",n.bottom<i.top);break;case"sticky-sentinel-bottom":t.previousElementSibling.classList.toggle("stick-to-bottom",n.top<i.bottom)}})},intersectionOptions);document.addEventListener("turbolinks:load",function(){var e=document.getElementById("sticky-sentinel-top"),t=document.getElementById("sticky-sentinel-bottom");e&&t&&(stickySkyscraperObserver.observe(e),stickySkyscraperObserver.observe(t))}),document.addEventListener("turbolinks:before-render",function(){stickySkyscraperObserver.disconnect()}),document.addEventListener("turbolinks:load",function(){if(document.megaSliderCurrentIndex=0,document.lastSlideIndex=3,document.getElementById("mega_slider")){var e=document.querySelectorAll(".main-slide .main-slide-item").length;document.lastSlideIndex=e-1,document.getElementById("next_slide").addEventListener("click",function(){return megaSliderSlide("next")}),document.getElementById("prev_slide").addEventListener("click",function(){return megaSliderSlide("prev")});var t=document.querySelector("#mega_slider .games");t.appendChild(t.firstElementChild);for(var n=e;n<3;n++)t.append(t.firstElementChild.cloneNode(!0));loopMegaSlide()}});var setup_lazy=function(){new LazyLoad({threshold:0,elements_selector:".lazy",throttle:3,data_src:"src",data_srcset:"srcset",show_while_loading:!0,skip_invisible:!0})},slider_loader=function(e,t){var n=Object.assign({carousel:"."+e+"-carousel",slide:"."+e+"-carousel-slide",lazy:!0},t||{});return setup_lazy(),new PureJSCarousel(n)};document.addEventListener("turbolinks:load",function(){setup_lazy();var e=document.getElementById("backtotop-gamepage");if(e&&e.addEventListener("click",function(){return document.querySelector("html").scrollTo(0,0),document.querySelector("body").scrollTo(0,0),!1}),{related_games:document.querySelector(".related-games-carousel")}.related_games){var t=slider_loader("related-games",{oneByOne:!1,infinite:!0}),n=t.btnNext,i=t.btnPrev;n.addEventListener("click",setup_lazy()),i.addEventListener("click",setup_lazy()),new TrackerService(!1).linksWatch(document.querySelector(".purejscarousel-slides-container"))}var o=document.getElementById("button_zoomin");o&&o.addEventListener("click",function(){var e=document.querySelector("#theGame iframe");e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen())});var r=document.querySelector(".wdg_page_all_labels");r&&(window.location.hash&&document.querySelector(window.location.hash).classList.add("is-open"),r.querySelectorAll(".label-title").forEach(function(e){e.addEventListener("click",function(){this.classList.toggle("is-open")})}))});let searchtimeout=null;var iptracking=function(){var e="Portals",t=encodeURIComponent(window.site.token);if(!localStorage.getItem("ipTracking")){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===this.readyState&&(this.status<200||this.status>299)){var n=new XMLHttpRequest;n.open("POST","https://tracker.gamedock.io/v1/events-tracker/track/product/"+e+"/user_id/"+t,!0),n.send()}},n.open("POST","https://tracker-v4.gamedock.io/v1/events-tracker/track/product/"+e+"/user_id/"+t,!0),n.send(),localStorage.setItem("ipTracking","true")}};window.PORTALJS.run("common","init",iptracking),window.PORTALJS.google=window.PORTALJS.google||{},window.PORTALJS.google.init=function(){window.PORTALJS.google.loadGtagScript(),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag_send_event=function(e,t){gtag("event",e,t)},window.PORTALJS.google.initGtag(),window.PORTALJS.run("common","init",window.PORTALJS.google.initGtag)},window.PORTALJS.google.initGtag=function(){gtag("js",new Date),gtag("config",window.gtm_id,{page_location:location.href})},window.PORTALJS.google.loadGtagScript=function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("id","googletagmanager"),e.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+window.gtm_id),document.head.appendChild(e)},window.addEventListener("turbolinks:load",()=>{window.UTIL.init()}),window.PORTALJS.run("common","init",initialize_search,[{dropdown:!0}]),window.PORTALJS.GDPR=window.PORTALJS.GDPR||{},window.PORTALJS.GDPR.checkGDPRConsent=function(){setTimeout(function(){readCookie("OptanonAlertBoxClosed")&&window.PORTALJS.google.init()},1e3)},window.PORTALJS.GDPR.setManageCookieBtnOnclick=function(){var e=document.querySelectorAll(".manage_cookies_button");Array.from(e).forEach(function(e){e.addEventListener("click",function(){event.preventDefault(),window.OneTrust&&window.OneTrust.ToggleInfoDisplay()})})},window.PORTALJS.GDPR.wrapConsentBanner=function(){var e=document.getElementById("onetrust-consent-sdk"),t=document.querySelector("[name=__tcfapiLocator]");if(e){var n=document.getElementById("cookie-turbolink-permanent");n.appendChild(e),n.appendChild(t),document.removeEventListener("turbolinks:before-visit",window.PORTALJS.GDPR.wrapConsentBanner)}},window.PORTALJS.GDPR.optanon_wrapper=function(){OptanonWrapper()},window.PORTALJS.run("common","init",window.PORTALJS.GDPR.setManageCookieBtnOnclick),window.PORTALJS.run("common","init",window.PORTALJS.GDPR.optanon_wrapper),document.addEventListener("turbolinks:before-visit",window.PORTALJS.GDPR.wrapConsentBanner),window.PORTALJS.run("profiles","avatars",avatarSelect),window.PORTALJS.run("friends","show",initializeFriendsTabs),window.PORTALJS.run("friends","show",initializePopupTriggers);